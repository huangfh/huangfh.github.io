---
layout: post
read_time: true
show_date: true
title: "linux常用命令"
date: 2022-02-24
# img: posts/20210324/Npm_logo.png
tags: [npm]
author: huangfh
description: ""
toc: yes
---
linux命令：

shell是linux命令集。
目录/文件：cd mkdir rm mp mv  touch cat
文件编辑：insert esc :wq
ps：进程状态
grep：用正则查找字符
```
#!/bin/bash

bashPath=/usr/local/app
serverPath=/usr/local/application/bin
logFile=$bashPath/start.log
logHisFile=$bashPath/start_history.log
server=app.js

source /etc/profile

if [ ! -d $bashPath ];then
    mkdir -p $bashPath
fi

chmod a+x $serverPath/
# 启动进程 
# 2>&1 0:标准输入 1:标准输出 2:标准错误输出 错误输出统一到标准输出里。
# tee 将输入保存到文件  
nohup node $serverPath/$server 2>&1 | tee $logFile >>$logHisFile 2>&1 &

sleep 3
#判断进程状态，是否正常启动。wc：统计字节数
num=`ps -ef |grep $serverPath/$server |grep -v grep|wc -l`
echo "the num of process after start is $num">>$logFile
if [ $num -lt 1 ];then
    echo "the process is not exit after start ">>$logFile
    exit 1
fi

exit 0

#  关闭进程
pidInfo=$(ps -ef | grep "$serverPath/$server" | grep -v grep | awk '{print $2}')
for pid in $pidInfo;do
	kill -9 $pid
done
```

