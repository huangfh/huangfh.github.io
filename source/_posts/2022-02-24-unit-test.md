---
layout: post
read_time: true
show_date: true
title: "jest单元测试"
date: 2022-02-24
img: jest.png
tags: [Jest]
author: huangfh
description: ""
toc: yes
---


## 常用配置
```javascript

{
collectCoverage: true,
reporters: ['default'],
setupFilesAfterEnv: ['./jest.setup.js'],
transform: {
'^.+\\.jsx?$': 'babel-jest',
'^.+\\.tsx?$': 'ts-jest',
},
transformIgnorePatterns: [
"/node_modules/(?!react-dev-inspector).+\\.js$"
],
moduleNameMapper: {
'@/(.*)$': '<rootDir>/src/$1',
'^antd/es/(.*)$': '<rootDir>/node_modules/antd/lib/$1',
'^rc-util/es/(.*)$': '<rootDir>/node_modules/rc-util/lib/$1',
'.*\\.less$': 'identity-obj-proxy',
'\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga|ico)$':
'<rootDir>/__mocks__/fileMock/fileMock.js',
},
// preset: 'ts-jest',
testRegex: '(/tests/.*|\\.(test|spec))\\.(ts|tsx|js)$',
modulePathIgnorePatterns: ['/tests/.eslintrc.js'],
moduleFileExtensions: ['js', 'ts', 'tsx'],
testEnvironment: 'jsdom',
collectCoverageFrom: [
'./src/components/**/*.{ts,tsx,js,jsx}',
'./src/models/*.{ts,tsx,js,jsx}',
'./src/layouts/*.{ts,tsx,js,jsx}',
'./src/pages/**/*.{ts,tsx,js,jsx}',
'./src/services/**/*.{ts,tsx,js,jsx}',
'./src/utils/**/*.{ts,tsx,js,jsx}',
],
displayName: 'react_project',
};


```

## setupFiles vs setupFilesAfterEnv

setupFiles 测试框架安装到环境之前执行，用来对环境做一些配置
setupFilesAfterEnv：测试框架安装到环境后执行。对测试框架做一些配置。常用！